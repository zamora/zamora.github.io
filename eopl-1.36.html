<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Solving EoPL Exercise 1.36</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Solving Eo<span class="mywbr"> &nbsp;</span>PL Exercise 1.36</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.The_.Problem%29" class="tocviewlink" data-pltdoc="x">The Problem</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Analysis%29" class="tocviewlink" data-pltdoc="x">Analysis</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Reflection%29" class="tocviewlink" data-pltdoc="x">Reflection</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Final_.Answer%29" class="tocviewlink" data-pltdoc="x">Final Answer</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Solving_.Eo.P.L_.Exercise_1_36%29" class="tocsubseclink" data-pltdoc="x">Solving Eo<span class="mywbr"> &nbsp;</span>PL Exercise 1.36</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.The_.Problem%29" class="tocsubseclink" data-pltdoc="x">The Problem</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cnumber-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;number-elements&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Analysis%29" class="tocsubseclink" data-pltdoc="x">Analysis</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cnumbered-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;numbered-elements&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cg~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;g&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cadd-one-to-numbered-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;add-one-to-numbered-elements&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3cadd-one-to-single-element~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;add-one-to-single-element&gt;</a></span></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3ctests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;tests&gt;</a></span></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Reflection%29" class="tocsubseclink" data-pltdoc="x">Reflection</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Final_.Answer%29" class="tocsubseclink" data-pltdoc="x">Final Answer</a></td></tr><tr><td><span class="Smaller"><a href="#%28elem._%28chunk._~3c%2A~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;*&gt;</a></span></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2 class="heading"><a name="(part._.Solving_.Eo.P.L_.Exercise_1_36)"></a>Solving EoPL Exercise 1.36<span class="button-group"><a href="#(part._.Solving_.Eo.P.L_.Exercise_1_36)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h2><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Justin Zamora &lt;<a href="mailto:justin@zamora.com">justin@zamora.com</a>&gt;</p></span></div><h3 class="heading">1<tt>&nbsp;</tt><a name="(part._.The_.Problem)"></a>The Problem<span class="button-group"><a href="#(part._.The_.Problem)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>The exercise is to write a procedure <span class="RktSym">g</span> such that number-elements from page 23
could be defined as:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cnumber-elements~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cnumber-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;number-elements&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">number-elements</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">null?</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">number-elements</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">lst</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><h3 class="heading">2<tt>&nbsp;</tt><a name="(part._.Analysis)"></a>Analysis<span class="button-group"><a href="#(part._.Analysis)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>What is this <span class="RktSym">number-elements</span> function? What does it do? What does in consume, and what does
it produce? We cannot know what <span class="RktSym">g</span> is supposed to do until we understand
<span class="RktSym">number-elements</span>.</p><p>We are given one example:</p><p><span class="RktPn">(</span><span class="RktSym">number-elements</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="stt"> </span><span class="RktVal">b</span><span class="stt"> </span><span class="RktVal">c</span><span class="stt"> </span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">=&gt;</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">a</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">b</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">2</span><span class="stt"> </span><span class="RktVal">c</span><span class="RktVal">)</span><span class="stt"> </span><span class="RktVal">(</span><span class="RktVal">3</span><span class="stt"> </span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktVal">)</span></p><p>From this example, it seems that <span class="RktSym">number-elements</span> consumes a list of symbols
and produces a list of &ldquo;elements&rdquo;. Each &ldquo;element&rdquo; is a list of one of
the symbols and its position in the list, numbered beginning at 0.</p><p><span class="RktSym">g</span> is given a zero element made from the first symbol in the list, and the
output from <span class="RktSym">number-elements</span> run on the rest of the list.</p><p>Therefore, in our example, the top-level call to <span class="RktSym">g</span> looks like:</p><p><span class="RktPn">(</span><span class="RktSym">g</span><span class="stt"> </span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="stt"> </span><span class="RktVal">a</span><span class="RktVal">)</span><span class="stt"> </span><a href="#%28elem._%28chunk._~3cnumbered-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;numbered-elements&gt;</a><span class="RktPn">)</span></p><p>Because we&rsquo;ve already figured out what <span class="RktSym">number-elements</span> does, we know that
the second argument to <span class="RktSym">g</span> is the rest of the original list,
numbered from zero:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cnumbered-elements~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cnumbered-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;numbered-elements&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">(</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktVal">)</span></p></blockquote></div></p><p>Looking at this, we can see that the task of <span class="RktSym">g</span> is to add one to the counter
of each element in the second list and <span class="RktSym">cons</span> the first argument onto the
result.</p><p>So <span class="RktSym">g</span> must look like this:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cg~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cg~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;g&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">numbered-elements</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28chunk._~3cadd-one-to-numbered-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;add-one-to-numbered-elements&gt;</a><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Now that we have broken down <span class="RktSym">g</span>, we have the smaller task of adding one to
each of the elements in the list. The <span class="RktSym">map</span> function seems like a natural
fit here. So we want something like:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cadd-one-to-numbered-elements~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cadd-one-to-numbered-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;add-one-to-numbered-elements&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><a href="#%28elem._%28chunk._~3cadd-one-to-single-element~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;add-one-to-single-element&gt;</a><span class="hspace">&nbsp;</span><span class="RktSym">numbered-elements</span><span class="RktPn">)</span></p></blockquote></div></p><p>To add one to a single element, we need to extract the count from the <span class="RktSym">car</span> of
the element, add one to it, then <span class="RktSym">cons</span> the result back onto the rest of the element:</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3cadd-one-to-single-element~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3cadd-one-to-single-element~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;add-one-to-single-element&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">elt</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">add1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">elt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">elt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>We have completed our function, but we need to test it. At the very least, we should
make sure that our code gets the example right. I have included it below, but you
should add more to verify that it actually works on a variety of inputs. Pay special
attention to edge cases like an empty list.</p><p><div class="SIntrapara"><a name="(elem._(chunk._~3ctests~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3ctests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;tests&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">number-elements</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">a</span><span class="hspace">&nbsp;</span><span class="RktVal">b</span><span class="hspace">&nbsp;</span><span class="RktVal">c</span><span class="hspace">&nbsp;</span><span class="RktVal">d</span><span class="RktVal">)</span><span class="RktPn">)</span></p></blockquote></div></p><h3 class="heading">3<tt>&nbsp;</tt><a name="(part._.Reflection)"></a>Reflection<span class="button-group"><a href="#(part._.Reflection)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p>It&rsquo;s worth taking a look at how we approached this problem so that we can learn to
solve other problems in the future. Instead of immediately trying guesses, we used a
disciplined approach to understanding the problem and creating a solution. Roughly
speaking, we performed the following tasks, which led us, step-by-step, toward the
solution.</p><ul><li><p>Using an example to understand the task</p></li><li><p>Defining the inputs and outputs</p></li><li><p>Breaking down the problem into pieces</p></li><li><p>Transforming the pieces</p></li><li><p>Combining the results into the solution</p></li><li><p>Testing</p></li></ul><p>You may notice that these steps are similar to those taught in
<a href="https://htdp.org/">How to Design Programges</a> as part of the
design recipes. HTDP gives a more rigorous and formal presentation, but this
exercise shows how useful good design practices can be.</p><h3 class="heading">4<tt>&nbsp;</tt><a name="(part._.Final_.Answer)"></a>Final Answer<span class="button-group"><a href="#(part._.Final_.Answer)" class="heading-anchor" title="Link to here">ðŸ”—</a><span style="visibility: hidden"> </span></span></h3><p><div class="SIntrapara"><a name="(elem._(chunk._~3c*~3e~3a1))"></a><span style="font-weight: bold"><span style="font-style: italic"><a href="#%28elem._%28chunk._~3c%2A~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;*&gt;</a></span> ::=</span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><a href="#%28elem._%28chunk._~3cg~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;g&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3cnumber-elements~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;number-elements&gt;</a></td></tr><tr><td><a href="#%28elem._%28chunk._~3ctests~3e~3a1%29%29" class="plainlink" data-pltdoc="x">&lt;tests&gt;</a></td></tr></table></blockquote></div></p></div></div><div id="contextindicator">&nbsp;</div></body></html>